/*!build time : 2013-10-22 3:56:22 PM*/
KISSY.add("gallery/KSortTable/1.0/index",function(a){function b(a){this.init(a)}var c=a.Event,d=a.DOM,e=a.all;return b.prototype={init:function(b){var f=this,g=a.get(b);f.fn=function(a){var b,c=e(a.target);void 0!==c.attr("data-sorttable")&&(b=f.getTable("tbody",c.parent().parent().parent()[0]),f.setTable(c[0],b))},d.attr(g,"data-sorttable")&&c.on(e(f.getTable("thead",g)),"click",f.fn),g=null},sortBy:{"default":function(a,b){return a.value<b.value?-1:a.value>b.value?1:0},date:function(){}},getTable:function(a,b){a="tbody"===a?b.tBodies[0]:"thead"===a?b.tHead:"tfoot"===a?b.tFoot:null;try{return a}finally{b=a=null}},setTable:function(a,b){var c,f,g,h,i,j,k=a.cellIndex,l=b.rows.length,m=l,n=[],o=e(a).attr("data-sorttable"),p=e(a).attr("data-reverse"),q=void 0===p?!1:"true"===p.toString()?!0:!1,r=d.query("th",e(a).parent()),s="st-active";for(c=0;c<r.length;c+=1)h=r[c],d.hasClass(h,s)&&d.removeClass(h,s);for(d.addClass(a,s),c=0;l>c;c+=1)f=b.rows[c],g=f.cells[k].textContent||f.cells[k].innerText,n.push({value:g,content:f.innerHTML});for(n.sort(this.sortBy[o]),q&&n.reverse(),e(a).attr("data-reverse",!q),c=0;l>c;c+=1)b.deleteRow(--m),j=d.create("<div>"),d.html(j,"<table><tbody><tr>"+n[c].content),j=this.getTable("tbody",j.firstChild),i=j.rows[0],d.append(i,b);j=b=a=f=r=i=null}},b});